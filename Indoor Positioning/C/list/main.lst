C51 COMPILER V9.59.0.0   MAIN                                                              04/25/2020 10:50:41 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\list\main.obj
COMPILER INVOKED BY: D:\XX\MDK\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\list\main.lst)
                    - TABS(2) OBJECT(.\list\main.obj)

line level    source

   1          /******************************************************************************
   2            作者：神秘藏宝室
   3            店铺：ILoveMCU.taobao.com
   4            功能：
   5              LCD1602液晶显示
   6              若液晶看不清楚字，请旋转对比度调节的电位器到字清晰为止
   7          ******************************************************************************/
   8          #include "main.h"
   9          #include "delay.h"
  10          #include "lcd1602.h"
  11          #include "led.h"
  12          #include "adc.h"
  13          #include "collect.h"
  14          
  15          /*************  功能说明  **************
  16          
  17          本程序演示LED闪烁  
  18          
  19          
  20          ******************************************/
  21          
  22          /*************  本地常量声明  **************/
  23          
  24          
  25          /*************  本地变量声明  **************/
  26          u16 text,RSS_data[3],m,n;
  27          
  28          
  29          /*************  本地函数声明  **************/
  30          
  31          
  32          
  33          /*************  外部函数和变量声明 *****************/
  34          
  35          
  36          
  37          /******************** IO配置函数 **************************/
  38          void  GPIO_config(void)
  39          {
  40   1        P5M0 &= ~(1<<5);    //设置P5.5为准双向口
  41   1        P5M1 &= ~(1<<5);
  42   1      }
  43          
  44          
  45          
  46          
  47          
  48          
  49          /******************** 主函数 **************************/
  50          void main(void)
  51          {
  52   1        init();
  53   1        GPIO_config();
  54   1      
C51 COMPILER V9.59.0.0   MAIN                                                              04/25/2020 10:50:41 PAGE 2   

  55   1        Init_LCD1602();
  56   1        LCD1602_write_com(0x80);    //指针指向第1行第0个位置
  57   1        LCD1602_write_word("HelloWorld!");
  58   1        delay_ms(200);
  59   1        while(1)
  60   1        {
  61   2          for(n = 0 ; n < 3 ; n++)
  62   2          {
  63   3            LCD1602_write_com(0x80+0x40+(4*n));  //指针指向第2行第13个位置
  64   3            LCD1602_write_data((RSS_data[n])/100 + 0x30); //显示百位
  65   3            LCD1602_write_data((RSS_data[n])%100/10 + 0x30);//显示十位
  66   3            LCD1602_write_data((RSS_data[n])%10 + 0x30);  //显示个位
  67   3            delay_ms(1000);
  68   3          }
  69   2        }
  70   1      }
  71          
  72          void Led_flash() interrupt 1
  73          {
  74   1        TH0 = (65536 - 10000) / 256;
  75   1        TL0 = (65535 - 10000) % 256;
  76   1        text++;
  77   1        if(text >= 50)
  78   1        {
  79   2          text = 0;
  80   2          temp = _crol_(temp,1);
  81   2          if(temp == 0x08)
  82   2            temp = 0x01;
  83   2          P1 = temp;
  84   2        
  85   2          for(m = 0 ; m < 3 ; m++)
  86   2          {
  87   3            RSS_data[m] = coll_data_1();
  88   3          }
  89   2        
  90   2        }
  91   1        
  92   1      }
  93          
  94          void init()
  95          {
  96   1        P0M1 = 0; P0M0 = 0; //设置为准双向口
  97   1        P1M1 = 0; P1M0 = 0; //设置为准双向口
  98   1        P2M1 = 0; P2M0 = 0; //设置为准双向口
  99   1        P3M1 = 0; P3M0 = 0; //设置为准双向口
 100   1        P4M1 = 0; P4M0 = 0; //设置为准双向口
 101   1        P5M1 = 0; P5M0 = 0; //设置为准双向口
 102   1        P6M1 = 0; P6M0 = 0; //设置为准双向口
 103   1        P7M1 = 0; P7M0 = 0; //设置为准双向口
 104   1        P1M1 |= (1<<3);   // 把ADC口设置为高阻输入
 105   1        P1M0 &= ~(1<<3);
 106   1        P1ASF = (1<<3);   //P1.3做ADC
 107   1        ADC_CONTR = 0xE0; //90T, ADC power on
 108   1        
 109   1        AUXR = 0x00;
 110   1        TMOD = 0x01;
 111   1        TH0 = (65536 - 10000) / 256;
 112   1        TL0 = (65535 - 10000) % 256;
 113   1        EA = 1;
 114   1        ET0 = 1;
 115   1        TR0 = 1;
 116   1        temp = 0x01;
C51 COMPILER V9.59.0.0   MAIN                                                              04/25/2020 10:50:41 PAGE 3   

 117   1        text = 0;
 118   1      }
 119          
 120          
 121          
 122          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    384    ----
   CONSTANT SIZE    =     12    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     13    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
